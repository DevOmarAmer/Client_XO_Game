<?xml version="1.0" encoding="UTF-8"?>

<?import java.net.URL?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.RowConstraints?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.shape.Circle?>
<?import javafx.scene.shape.Line?>

<StackPane fx:id="rootPane" prefHeight="768.0" prefWidth="1024.0" styleClass="gameboard-root" xmlns="http://javafx.com/javafx/13" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.mycompany.client_xo_game.GameboardController">

    <Label styleClass="bg-symbol-x" text="X" translateX="-180" translateY="60" StackPane.alignment="CENTER_LEFT" />
    <Label styleClass="bg-symbol-o" text="O" translateX="180" translateY="-60" StackPane.alignment="TOP_RIGHT" />

    <BorderPane>
        <padding>
            <Insets bottom="30" left="30" right="30" top="30" />
        </padding>

        <top>
            <HBox alignment="CENTER_LEFT">
                <Button fx:id="backButton" onAction="#goBack" styleClass="action-btn" text="â† BACK" />
            </HBox>
        </top>

        <center>
            <VBox alignment="CENTER" maxHeight="-Infinity" maxWidth="-Infinity" spacing="25" styleClass="xo-glass-panel">
                
                <VBox alignment="CENTER" spacing="5">
                    <Label fx:id="turnLabel" styleClass="turn-label" text="YOUR TURN" />
                    <Line endX="200" styleClass="glow-line" strokeWidth="2.0" />
                </VBox>

                <HBox fx:id="replayControls" alignment="CENTER" managed="false" spacing="20.0" visible="false">
                    <Button fx:id="playButton" onAction="#handlePlay" styleClass="action-btn" text="START REPLAY" />
                    <Button fx:id="pauseButton" onAction="#handlePause" styleClass="action-btn, btn-pause" text="PAUSE" />
                    <Button fx:id="resetButton" onAction="#handleReset" styleClass="action-btn, btn-reset" text="RESET" />
                </HBox>

                <StackPane fx:id="boardContainer">
                    <GridPane fx:id="board" alignment="CENTER" hgap="15" styleClass="board" vgap="15">
                        <columnConstraints>
                            <ColumnConstraints />
                            <ColumnConstraints />
                            <ColumnConstraints />
                        </columnConstraints>
                        <rowConstraints>
                            <RowConstraints />
                            <RowConstraints />
                            <RowConstraints />
                        </rowConstraints>

                        <StackPane onMouseClicked="#onCellClicked" styleClass="cell" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                        <StackPane onMouseClicked="#onCellClicked" styleClass="cell" GridPane.columnIndex="1" GridPane.rowIndex="0" />
                        <StackPane onMouseClicked="#onCellClicked" styleClass="cell" GridPane.columnIndex="2" GridPane.rowIndex="0" />
                        
                        <StackPane onMouseClicked="#onCellClicked" styleClass="cell" GridPane.columnIndex="0" GridPane.rowIndex="1" />
                        <StackPane onMouseClicked="#onCellClicked" styleClass="cell" GridPane.columnIndex="1" GridPane.rowIndex="1" />
                        <StackPane onMouseClicked="#onCellClicked" styleClass="cell" GridPane.columnIndex="2" GridPane.rowIndex="1" />
                        
                        <StackPane onMouseClicked="#onCellClicked" styleClass="cell" GridPane.columnIndex="0" GridPane.rowIndex="2" />
                        <StackPane onMouseClicked="#onCellClicked" styleClass="cell" GridPane.columnIndex="1" GridPane.rowIndex="2" />
                        <StackPane onMouseClicked="#onCellClicked" styleClass="cell" GridPane.columnIndex="2" GridPane.rowIndex="2" />
                    </GridPane>
                </StackPane>
            </VBox>
        </center>

        <bottom>
            <HBox fx:id="playersBar" alignment="CENTER" spacing="50" styleClass="players-dock" BorderPane.alignment="CENTER">
                
                <HBox alignment="CENTER_LEFT" spacing="15" styleClass="player-card, p1-card">
                    <VBox alignment="CENTER_LEFT" spacing="2">
                        <Label text="PLAYER 1 (X)" styleClass="player-label" />
                        <Label fx:id="playerNameP1" styleClass="player-name-text, p1-text" text="Username" />
                        <Label fx:id="scoreP1" styleClass="player-label" text="Score: 0" />
                    </VBox>
                    <StackPane>
                        <Circle radius="25" fill="transparent" stroke="#00fff0" strokeWidth="2" style="-fx-effect: dropshadow(gaussian, #00fff0, 10, 0.5, 0, 0);"/>
                        <ImageView fitHeight="40" fitWidth="40" preserveRatio="true">
                            <image>
                                <Image url="@/assets/avatar.png" />
                            </image>
                            <clip>
                                <Circle centerX="20" centerY="20" radius="20" />
                            </clip>
                        </ImageView>
                    </StackPane>
                </HBox>

                <Label styleClass="vs-label" text="VS" />

                <HBox alignment="CENTER_RIGHT" spacing="15" styleClass="player-card, p2-card">
                    <StackPane>
                        <Circle radius="25" fill="transparent" stroke="#ff007f" strokeWidth="2" style="-fx-effect: dropshadow(gaussian, #ff007f, 10, 0.5, 0, 0);"/>
                        <ImageView fitHeight="40" fitWidth="40" preserveRatio="true">
                            <image>
                                <Image url="@/assets/avatar.png" />
                            </image>
                            <clip>
                                <Circle centerX="20" centerY="20" radius="20" />
                            </clip>
                        </ImageView>
                    </StackPane>
                    <VBox alignment="CENTER_RIGHT" spacing="2">
                        <Label text="PLAYER 2 (O)" styleClass="player-label" />
                        <Label fx:id="playerNameP2" styleClass="player-name-text, p2-text" text="Opponent" />
                        <Label fx:id="scoreP2" styleClass="player-label" text="Score: 0" />
                    </VBox>
                </HBox>

            </HBox>
        </bottom>

    </BorderPane>

    <stylesheets>
        <URL value="@/styles/gameboard.css" />
    </stylesheets>
</StackPane>