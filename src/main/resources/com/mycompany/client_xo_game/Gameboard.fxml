<?xml version="1.0" encoding="UTF-8"?>

<?import java.net.URL?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.RowConstraints?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.shape.Circle?>
<?import javafx.scene.text.Font?>

<BorderPane fx:id="rootPane" prefHeight="600.0" prefWidth="700.0" styleClass="gameboard" xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.mycompany.client_xo_game.GameboardController">

    <top>
        <HBox alignment="CENTER_LEFT" spacing="20" styleClass="turn-bar">
            <padding>
                <Insets bottom="16" left="16" right="16" top="16" />
            </padding>

            <!-- Back Button -->
            <Button fx:id="backButton" onAction="#goBack" style="-fx-font-size: 14; -fx-padding: 5 10 5 10;" text="Back" />

            <!-- Turn Label -->
            <Label fx:id="turnLabel" styleClass="turn-label" text="Player 1 Turn">
                <font>
                    <Font size="32" />
                </font>
            </Label>
        </HBox>
    </top>


    <center>
        <StackPane fx:id="boardContainer" styleClass="board-container">
            <GridPane fx:id="board" alignment="CENTER" hgap="14" styleClass="board" vgap="14">
                
                <columnConstraints>
                    <ColumnConstraints />
                    <ColumnConstraints />
                    <ColumnConstraints />
                </columnConstraints>

                <rowConstraints>
                    <RowConstraints />
                    <RowConstraints />
                    <RowConstraints />
                </rowConstraints>

                <StackPane onMouseClicked="#onCellClicked" styleClass="cell" />
                <StackPane onMouseClicked="#onCellClicked" styleClass="cell" GridPane.columnIndex="1" />
                <StackPane onMouseClicked="#onCellClicked" styleClass="cell" GridPane.columnIndex="2" />

                <StackPane onMouseClicked="#onCellClicked" styleClass="cell" GridPane.rowIndex="1" />
                <StackPane onMouseClicked="#onCellClicked" styleClass="cell" GridPane.columnIndex="1" GridPane.rowIndex="1" />
                <StackPane onMouseClicked="#onCellClicked" styleClass="cell" GridPane.columnIndex="2" GridPane.rowIndex="1" />

                <StackPane onMouseClicked="#onCellClicked" styleClass="cell" GridPane.rowIndex="2" />
                <StackPane onMouseClicked="#onCellClicked" styleClass="cell" GridPane.columnIndex="1" GridPane.rowIndex="2" />
                <StackPane onMouseClicked="#onCellClicked" styleClass="cell" GridPane.columnIndex="2" GridPane.rowIndex="2" />
            </GridPane>
        </StackPane>
    </center>

    <bottom>
        <HBox fx:id="playersBar" spacing="24" styleClass="players-bar">
            <padding>
                <Insets bottom="8" left="20" right="20" top="8" />
            </padding>

            <HBox alignment="CENTER_LEFT" spacing="14" styleClass="player-box" HBox.hgrow="ALWAYS">
                <StackPane styleClass="avatar">
                    <ImageView fitHeight="40" fitWidth="40" pickOnBounds="true" preserveRatio="true" smooth="true">
                        <image>
                            <Image url="@/assets/avatar.png" />
                        </image>
                        <clip>
                            <Circle centerX="30" centerY="30" radius="30" />
                        </clip>
                    </ImageView>
                </StackPane>

                <VBox alignment="CENTER_LEFT" maxWidth="Infinity" spacing="4" HBox.hgrow="ALWAYS">
                    <Label fx:id="playerNameP1" styleClass="player-name" text="Player 1" />
                    <Label fx:id="scoreP1" styleClass="player-score" text="Score: 0" />
                </VBox>

                <StackPane styleClass="icon-x">
                    <ImageView fitHeight="40" fitWidth="40" preserveRatio="true" smooth="true">
                        <image>
                            <Image url="@/assets/X.png" />
                        </image>
                    </ImageView>
                </StackPane>
            </HBox>

            <HBox alignment="CENTER_RIGHT" spacing="14" styleClass="player-box" HBox.hgrow="ALWAYS">
                <StackPane styleClass="icon-o">
                    <ImageView fitHeight="40" fitWidth="40" preserveRatio="true" smooth="true">
                        <image>
                            <Image url="@/assets/O.png" />
                        </image>
                    </ImageView>
                </StackPane>

                <VBox alignment="CENTER_RIGHT" maxWidth="Infinity" spacing="4" HBox.hgrow="ALWAYS">
                    <Label fx:id="playerNameP2" styleClass="player-name" text="Player 2" />
                    <Label fx:id="scoreP2" styleClass="player-score" text="Score: 0" />
                </VBox>

                <StackPane styleClass="avatar">
                    <ImageView fitHeight="40" fitWidth="40" pickOnBounds="true" preserveRatio="true" smooth="true">
                        <image>
                            <Image url="@/assets/avatar.png" />
                        </image>
                        <clip>
                            <Circle centerX="30" centerY="30" radius="30" />
                        </clip>
                    </ImageView>
                </StackPane>
            </HBox>
        </HBox>
    </bottom>

    <stylesheets>
        <URL value="@/styles/gameboard.css" />
    </stylesheets>
</BorderPane>
